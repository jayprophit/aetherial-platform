_format_version: "3.0"
_transform: true

services:
  - name: aetherial-api
    url: http://aetherial-api.production.svc.cluster.local:3000
    routes:
      - name: api-routes
        paths:
          - /api
          - /api/
        strip_path: true
        methods: [GET, POST, PUT, DELETE, PATCH]
    plugins:
      - name: rate-limiting
        config:
          minute: 60
          policy: local
          limit_by: consumer
          hide_client_headers: false
      - name: key-auth
        config:
          key_names: ["apikey"]
          hide_credentials: false
